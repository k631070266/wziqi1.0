<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº”å­æ£‹æ¸¸æˆ - ç½‘ç»œè¯Šæ–­</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 600px;
        }
        h1 {
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        .status {
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            font-size: 1.2em;
            font-weight: bold;
        }
        .success {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            color: #2c5282;
        }
        .error {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            color: #d63031;
        }
        .tips {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            text-align: left;
        }
        .tips h3 {
            color: #495057;
            margin-bottom: 15px;
        }
        .tips ul {
            color: #6c757d;
            line-height: 1.8;
        }
        .test-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.3s ease;
            margin: 10px;
        }
        .test-button:hover {
            transform: translateY(-2px);
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #333;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® äº”å­æ£‹æ¸¸æˆè¯Šæ–­</h1>
        
        <div id="status" class="status">
            æ­£åœ¨æ£€æµ‹ç½‘ç»œè¿æ¥...
        </div>
        
        <div id="details" style="display: none;">
            <p><strong>æœåŠ¡å™¨çŠ¶æ€ï¼š</strong> <span id="server-status">æ£€æµ‹ä¸­...</span></p>
            <p><strong>ç«¯å£çŠ¶æ€ï¼š</strong> <span id="port-status">æ£€æµ‹ä¸­...</span></p>
            <p><strong>æµè§ˆå™¨ä¿¡æ¯ï¼š</strong> <span id="browser-info">æ£€æµ‹ä¸­...</span></p>
        </div>
        
        <div style="margin: 30px 0;">
            <button class="test-button" onclick="testConnection()">é‡æ–°æ£€æµ‹è¿æ¥</button>
            <button class="test-button" onclick="openGame()">æ‰“å¼€æ¸¸æˆ</button>
        </div>
        
        <div class="tips">
            <h3>ğŸ”§ å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆï¼š</h3>
            <ul>
                <li><strong>é˜²ç«å¢™é—®é¢˜ï¼š</strong>æ£€æŸ¥Windowsé˜²ç«å¢™æ˜¯å¦é˜»æ­¢äº†æœ¬åœ°è®¿é—®</li>
                <li><strong>ç«¯å£å ç”¨ï¼š</strong>å°è¯•ä½¿ç”¨ä¸åŒçš„ç«¯å£å·ï¼ˆ8080, 3000, 5173ç­‰ï¼‰</li>
                <li><strong>æµè§ˆå™¨ç¼“å­˜ï¼š</strong>æŒ‰ Ctrl+F5 å¼ºåˆ¶åˆ·æ–°é¡µé¢</li>
                <li><strong>ä»£ç†è®¾ç½®ï¼š</strong>æ£€æŸ¥æ˜¯å¦å¯ç”¨äº†ä»£ç†æœåŠ¡å™¨</li>
                <li><strong>æ€æ¯’è½¯ä»¶ï¼š</strong>ä¸´æ—¶å…³é—­æ€æ¯’è½¯ä»¶æµ‹è¯•</li>
                <li><strong>hostsæ–‡ä»¶ï¼š</strong>æ£€æŸ¥C:\Windows\System32\drivers\etc\hostsæ–‡ä»¶</li>
            </ul>
        </div>
        
        <div style="margin-top: 30px; padding: 20px; background: #e3f2fd; border-radius: 15px;">
            <h4>ğŸŒ å¤‡ç”¨è®¿é—®åœ°å€ï¼š</h4>
            <p><a href="http://localhost:8080" target="_blank">http://localhost:8080</a></p>
            <p><a href="http://127.0.0.1:8080" target="_blank">http://127.0.0.1:8080</a></p>
            <p><a href="http://localhost:5175" target="_blank">http://localhost:5175</a></p>
            <p><a href="http://127.0.0.1:5175" target="_blank">http://127.0.0.1:5175</a></p>
        </div>
    </div>

    <script>
        function testConnection() {
            const statusEl = document.getElementById('status');
            const detailsEl = document.getElementById('details');
            
            statusEl.innerHTML = '<div class="loading"></div> æ­£åœ¨æ£€æµ‹ç½‘ç»œè¿æ¥...';
            statusEl.className = 'status';
            detailsEl.style.display = 'none';
            
            // æ£€æµ‹æµè§ˆå™¨ä¿¡æ¯
            document.getElementById('browser-info').textContent = navigator.userAgent;
            
            // æ£€æµ‹æœåŠ¡å™¨çŠ¶æ€
            const urls = [
                'http://localhost:8080',
                'http://127.0.0.1:8080', 
                'http://localhost:5175',
                'http://127.0.0.1:5175'
            ];
            
            let checked = 0;
            let availableServers = [];
            
            urls.forEach(url => {
                fetch(url, { method: 'HEAD', mode: 'no-cors' })
                    .then(() => {
                        availableServers.push(url);
                        checked++;
                        if (checked === urls.length) {
                            showResults(availableServers);
                        }
                    })
                    .catch(() => {
                        checked++;
                        if (checked === urls.length) {
                            showResults(availableServers);
                        }
                    });
            });
        }
        
        function showResults(availableServers) {
            const statusEl = document.getElementById('status');
            const detailsEl = document.getElementById('details');
            const serverStatus = document.getElementById('server-status');
            const portStatus = document.getElementById('port-status');
            
            if (availableServers.length > 0) {
                statusEl.innerHTML = 'ğŸ‰ æœåŠ¡å™¨æ­£å¸¸è¿è¡Œï¼';
                statusEl.className = 'status success';
                serverStatus.textContent = 'è¿è¡Œä¸­ âœ“';
                serverStatus.style.color = '#28a745';
                portStatus.textContent = availableServers.join(', ');
                portStatus.style.color = '#28a745';
            } else {
                statusEl.innerHTML = 'âŒ æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨';
                statusEl.className = 'status error';
                serverStatus.textContent = 'æœªå“åº” âœ—';
                serverStatus.style.color = '#dc3545';
                portStatus.textContent = 'æ‰€æœ‰ç«¯å£éƒ½æ— æ³•è®¿é—®';
                portStatus.style.color = '#dc3545';
            }
            
            detailsEl.style.display = 'block';
        }
        
        function openGame() {
            // å°è¯•æ‰“å¼€æœ€æœ‰å¯èƒ½çš„åœ°å€
            const urls = ['http://localhost:8080', 'http://localhost:5175'];
            let opened = false;
            
            urls.forEach((url, index) => {
                setTimeout(() => {
                    if (!opened) {
                        window.open(url, '_blank');
                        opened = true;
                    }
                }, index * 1000);
            });
        }
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æµ‹
        window.onload = function() {
            setTimeout(testConnection, 1000);
        };
    </script>
</body>
</html>